diff -urN libica2/include/z90crypt.h libica2.new/include/z90crypt.h
--- libica2/include/z90crypt.h	2002-07-18 10:19:39.000000000 -0400
+++ libica2.new/include/z90crypt.h	2003-05-27 05:52:26.000000000 -0400
@@ -207,7 +207,6 @@
 #define ICAZ90QUERYSYNCH _IOC(_IOC_READ, ICA_IOCTL_MAGIC, 0x14,0)
 #endif
 
-#ifdef CONFIG_ARCH_S390
 /*
  * errno definitions
  */
@@ -219,7 +218,6 @@
 #define ETIMEOUT       133     /* request timed out                         */
 #define EUNKNOWN       134     /* some unrecognized error occured           */
 #define EGETBUFF       135     // Error getting buffer
-#endif
 
 #ifdef __KERNEL__
 
diff -urN libica2/Makefile.macros libica2.new/Makefile.macros
--- libica2/Makefile.macros	1969-12-31 19:00:00.000000000 -0500
+++ libica2.new/Makefile.macros	2003-05-27 08:37:45.000000000 -0400
@@ -0,0 +1,3 @@
+S390_FLAG=-D_LINUX_S390_
+LIBCRYPTO=-lcrypto
+PERFFLAG=-O2
diff -urN libica2/src/icalinux.c libica2.new/src/icalinux.c
--- libica2/src/icalinux.c	2002-08-13 10:38:34.000000000 -0400
+++ libica2.new/src/icalinux.c	2003-05-27 05:40:52.000000000 -0400
@@ -380,6 +380,18 @@
 
 #ifdef _LINUX_S390_
 #define __USE_GNU
+typedef struct ica_z90_status_t {
+  int totalcount;
+  int leedslitecount;
+  int leeds2count;
+  int requestqWaitCount;
+  int pendingqWaitCount;
+  int totalOpenCount;
+  int cryptoDomain;
+  unsigned char status[64];
+  unsigned char qdepth[64];
+} ica_z90_status;
+#define ICAZ90STATUS    _IOC(_IOC_READ, ICA_IOCTL_MAGIC, 0x10, sizeof(ica_z90_status))
 #include <string.h>
 #endif
 #include <fcntl.h>
